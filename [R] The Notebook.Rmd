---
title: "[R] The Notebook"
author: "*Veneta Baeva*"  
output: github_document
---
![](/Users/venetabaeva/git/repository4/Picture1.jpg)
---

## Libraries

> library load 

```{r message=FALSE, warning=FALSE, paged.print=FALSE}
library(dplyr)
```
```{r}
library(dslabs)
```
```{r message=FALSE, warning=FALSE, paged.print=FALSE}
library(tidyverse)
```

## I.

1.[dataFrame] create

```{r}
dfTest <- data.frame(names=c("A","B","C","D"),
                     num1 = c(1,2,3,4),
                     num2 = c(10,20,30,40),
                     stringsAsFactors = FALSE)
dfTest
```

1.[data] read

```{r}
data(heights)
```

1.[file] read

```{r}
dfAlc <- read.csv(
                      file = ("/Users/venetabaeva/git/repository4/gapminder.csv"),
                      header = TRUE,
                      sep = ";",
                      dec = ".")

```

###### ^1^ click: [Alcohol Consumption](https://www.kaggle.com/sansuthi/alcohol-consumption)

1.[file] view 

```{r}
View(dfAlc)
```

1.[file] check structure

```{r}
str(dfAlc)
```

1.[table] create frequency table for factor

```{r}
tableAlcCountry <- c(dfAlc$abbrv)
table(tableAlcCountry)
```

1.[vector] create 

```{r}
country<- c("Afghanistan","Albania","Algeria","Andorra","Angola", "Antigua and Barbuda")
country
abbrv <- c("AF", "AL", "DZ", "AD", "AO", "AG")
abbrv
aconsum <- c(0, 7, 1, 10, 6, 8)
aconsum
x <- c(60,50 ,40, 30, 20)
x
```

1.[vector] change elements' type 

```{r}
y<- as.character(x) 
y
as.numeric(y)
x<-y
```

1.[vector]check default type 

```{r}
x<-c(1,"test",3)
x
class(x)
```

1.[vector]check default type 

```{r}
x<-c("1","test","3")
x
class(x)
as.numeric(x)
```

###### ^1^ Note: coercion problem -> NAs introduced by coercion 

1.[vector] sort elements' values in increasing order 

```{r}
sort(x) 
```

1. [vector] return/keep index of the elements' values in increasing order

```{r}
index <- order(x)
index
```

1.[vector] sort vector's elements in order, through indexing

```{r}
x[index]
```

1.[vector] check order 

```{r}
order(x)
```

1.[vector] rank; returns the order of each element in an ascending list

```{r}
rank(x)
```

1.{vector} associate 

```{r}
abbrvCountry <- c("AF"="Afghanistan", "AL" = "Albania", "DZ" ="Algeria", "AD" = "Andorra", "AO" = "Angola", "AG"= "Antigua and Barbuda")
abbrvCountry
```

1.[vector] assign name

```{r}
names(abbrvCountry)<-abbrv 
abbrv
abbrvCountry
```

1.[vector] access vector's element's value descreately, through indexing 

```{r}
abbrvCountry[2]
```

1.[vector] access vector's elements' values descreately, through indexing

```{r}
abbrvCountry[c(1,3)]
```

1.[vector] access vector's elements' values interval-ly, through indexing 

```{r}
abbrvCountry[1:2]
```

1.[vector] access vector's elements' values interval-ly, through naming the element  

```{r}
abbrvCountry["AF"]
abbrvCountry[c("AL","DZ")]
```

1.[dataFrame] create data frame

```{r}
dfAbbrvAconsum <- data.frame(country = abbrv, alchoholconsumption = aconsum)
```

1.[file] check class

```{r}
class(dfAlc)
class(dfAlc$aconsum)
```

1.[element] change type of element 

```{r}
class(1)
class(1L)
```

1.[sequence] show

```{r}
seq(1,10)
1:10
```

1.[sequence] generate increasing sequence of numbers with pretermed length

```{r}
seq(1, 10, length.out = 100)
```


1.[sequence] check length

```{r}
length(seq(1,10))
```


1.[dataFrame] check levels of a factor

```{r}
levels(dfAlc$aconsum)
```

1.[dataFrame] check number of levels of a factor

```{r}
nlevels(dfAlc$aconsum)
```

1.[file] check headers

```{r}
head(dfAlc)
```
1.[file] check headers' names

```{r}
names(dfAlc)
```

1.[column] access

```{r}
dfAlc["aconsum"]
```

1.[vector]sort in increasing order 

```{r}
sort(dfAlc$aconsum)
```


1.[column] access through vector
```{r}
dfAlc[["aconsum"]]
```


1.[column] access through vector
```{r}
dfAlc$aconsum
```

1.[object] define

```{r}
aconsum <- dfAlc$aconsum
urbanrt <-dfAlc$urbanrt
employrt <- dfAlc$employrt
```

1.[vector] count NAs

```{r}
naS <- is.na(aconsum)
sum(naS)
```

1.[vector] expell NAs

```{r}
mean(aconsum[!naS])
```

1.[vector] point column from data frame to calculate the mean for

```{r}
mean(dfAlc[,2])
```


1.[object] define lenght

```{r}
length(aconsum)
```

1.[object] check identical

```{r}
identical(urbanrt,employrt)
```

1.[vector] return index of the elements' values in increasing order 

1.1.[vector] sort vector's elements in order, through indexing

```{r}
iOrdDfAconsum<-order(dfAlc$aconsum)
dfAlc$abbrv[iOrdDfAconsum]
```

1.[vector] find max value between elements, through indexing

1.1[object] return index

1.1.1[vector] show value of element, through indexing the object 

```{r}
iMax<-which.max(dfAlc$aconsum)
iMax
dfAlc$abbrv[iMax]
dfAlc$abbrv[which.max(dfAlc$aconsum)]
```

1.[vector] find max value between elements, through indexing

1.1[object] return index

1.1.1[vector] show value of element, through indexing the object 

```{r}
iMin<-which.max(dfAlc$aconsum)
iMin
dfAlc$abbrv[iMin]
dfAlc$abbrv[which.min(dfAlc$aconsum)]
```

1.[vector] order

```{r}
dfAlc$abbrv[order(dfAlc$employrt,decreasing=TRUE)]
```

1.[vector] check range through indexing

1.1.[vector] count the number of elements in the range

```{r}
i <- dfAlc$aconsum  < 5
i
dfAlc$abbrv[i]
sum(i,na.rm =TRUE)
```

1.1.[vector] filter data by sub-setting row

```{r}
filter(dfAlc, region=="EMEA")
```

1.[vector] filter

```{r}
emea<- dfAlc$region == "EMEA" 
aconsum <- dfAlc$aconsum <= 5 
i <- aconsum&emea
dfAlc$abbrv[i]
```

1.1.[vector] which indexes of elements  has value TRUE 

```{r}
which(i)
```

1.1.[vector] which value TRUE or FALSE of element 

```{r}
i<-which(dfAlc$abbrv == "BG")
i
aconsum[i]
```

1.1.[vector] match values of elements and return TRUE or FALSE 

```{r}
i <- match(c("BG","IT","ES"),dfAlc$abbrv)
i
dfAlc$abbrv[i]
aconsum[i]
```

1.1.[vector] check whether values of vector in values of vector and return TRUE or FALSE 

```{r}
emea<- dfAlc$region == "EMEA" 
aconsum5 <- dfAlc$aconsum <= 5 
aconsum10 <- dfAlc$aconsum <= 5 
aconsum5&emea %in% aconsum10&emea
```

1.1.[vector] check whether each value of vector in values of the same vector and return TRUE or FALSE 

```{r}
checkAbbrv<- c("GB","BG","MZ") %in% dfAlc$abbrv
```

1.1.[vector] check whether each value of vector in values of the same vector, through indexing and return TRUE or FALSE 

```{r}
checkAbbrv<- c("GB","BG","MZ") %in% dfAlc$abbrv
i <- which(!checkAbbrv%in%dfAlc$abbrv)
i
checkAbbrv[i] 
```

1.1.[dataFrame] mutate data frame

```{r}
dfAlc <- mutate(dfAlc,rank=rank(-dfAlc$aconsum))
str(dfAlc)
```
###### ^2^ Note: include a column named rank with the ranks of rate from highest to lowest

1.1.[dataFrame] excluding filter value and create data frame 

```{r}
dfNoEMEA <- data.frame(filter(dfAlc,region!="EMEA"))
nrow(dfNoEMEA)
```

1.1.[dataFrame] including filter value and create data frame 

```{r}
dfEMEAAPAC <- data.frame(filter(dfAlc,region %in% c("EMEA","APAC")))
nrow(dfEMEAAPAC)
```

1.1.[dataFrame] filter and select only

```{r}
EMEAAPACAconsum10 <- filter(dfAlc,region %in% c("EMEA","APAC") & aconsum < 10)
select(EMEAAPACAconsum10,country,aconsum,rank)
```

1.1.[dataFrame] select subsetting and filter 

```{r}
newTable <- select(dfAlc,country,region,aconsum) 
filter(newTable,aconsum <= 10)
str(newTable)
```
1.[dataFrame] pipe select and pipe filter

```{r}
dfAlc %>% select(country,region,aconsum) %>% filter(aconsum <= 10)
```

1.[dataFrame] filter pipe select

```{r}
filter(dfAlc, region %in% c("EMEA", "APAC") & aconsum < 10 )%>% select(country, aconsum, rank)
```
1.[dataFrame] pipe filter select
```{r}
dfAlc %>% mutate(aconsum, rank) %>% filter(region %in% c('EMEA','APAC') & aconsum <10) %>% select(country,aconsum,rank)
```

1.[dataFrame]

```{r}
ind <- heights$height > mean(heights$height)#How many individuals in the dataset are above average height?
sum(ind)
ind <- heights$height > mean(heights$height) & (heights$sex =="Female")#How many individuals in the dataset are above average height and are female?
sum(ind)
mean(heights$sex == "Female")# proportion of individuals in the dataset are female
minH<- min(heights$height) 
ind <- match(minH, heights$height)#Use the match() function to determine the index of the first individual with the minimum height.
heights$sex[ind]#Subset the sex column of the dataset by the index in 4b to determine the individualâ€™s sex.
maxH <- max(heights$height)#Write code to create a vector x that includes the integers between the minimum and maximum heights (as numbers).
minH <- min(heights$height)
intgr <- c(minH:maxH)
intgr
sum(!(intgr %in% heights$height))#How many of the integers in x are NOT heights in the dataset?
heights <- mutate(heights, ht_cm = height*2.54)#create a new column of heights in centimeters named ht_cm
head(heights)
heights$ht_cm[18]
mean(heights$ht_cm) 
females <- filter(heights, sex == "Female") #females by filtering the heights2 data to contain only female individuals.
head(females)
nrow(females)#How many females are in the heights2 dataset?
mean(females$ht_cm)#What is the mean height of the females in centimeters?
```

3.[if-els] 

```{r}
i <- which.min(dfAlc$aconsum)
if (dfAlc$aconsum[i] < 10){
  print(dfAlc$country[i])
}else{
  print("No coutnry has alcochol rate that low")
}
```

3.[ifelse] if logical is TRUE, then return 1st answer, if FALSE, then 2nd answer

```{r}
minAlc <- which.min(dfAlc$aconsum)
ifelse(minAlc,dfAlc$country,NA)
```

2.[dataFrame]remove NA

```{r}
sum(is.na(dfAlc))
dfAlc[is.na(dfAlc)] = 0
View(dfAlc)
```

3.[ifelse][all]

```{r}
if(all(dfAlc$aconsum < 30)){
  print("World Alcochol rate is under 30")
} else{
  print("World Alcochol rate is not under 30")
}
```

3.[ifelse]

```{r}
str(dfAlc)
x <- dfAlc$country
xCharCountry <- nchar(x)
y <- dfAlc$abbrv
changeCountryToAbbrv<- ifelse(xCharCountry >2,y,x)
changeCountryToAbbrv
```

3.[any] take a vector of logicals ; return true, if any of the entries is true 

```{r}
x <- c(TRUE, FALSE)
any(x)
```

3.[all] take a vector of logicals; return  TRUE, if all the entries are true 

```{r}
x <- c(TRUE, FALSE)
all(x)
```

4.[function]

```{r}
avg <- function(x){
  s <- sum(x)
  n <- length(x)# Note:  not saved in the work space; the values of the variables are changed only during the F's call
  s/n
} 
x<- dfAlc$urbanrt
identical (mean(x),avg(x))
```

4.[function]

```{r}
avg <- function(x,arithmetic=TRUE){ # calculate either geometric, or arithmetic average depending on predefined variable
    n <- length(x)
    arithmetic <-sum(x)/n
    geometric<- prod(x)^(1/n)
    ifelse(arithmetic,arithmetic,geometric)
  }
x<- dfAlc$urbanrt
avg(x)
```

3.[forloop]

```{r}
compute_s_n <- function(n){
    x<- 1:n
    sum(x) 
  }
compute_s_n(3)
m <-25 
s_n <- vector(length = m)#create an empty vector for storing
for(n in 1:m){
  s_n[n] <- compute_s_n(n)
}
n <- 1:m
plot(n,s_n)
lines(n,n*(n+1)/2)
```

3.[forloop]

```{r}
sum <- 0
for(i in 1:2) 
  sum <- sum + i^2
sum
```


2.[ggplot]

```{r}
abbCountry <- dfAlc$abbrv 
suicidesPer100 <- dfAlc$suicideper100
urbanRT <- dfAlc$urbanrt
region <- dfAlc$region
ranksAConsumption <- rank(dfAlc$aconsum,na.last = NA)
i <- order(dfAlc$aconsum)
df<- data.frame(country = abbCountry[i], suicide = suicidesPer100[i], rank = ranksAConsumption[i],urbanrate = urbanRT[i],region = region[i])
df %>%
  ggplot(aes(urbanrate, suicide, label=country,color=rank)) + geom_label()

```

2.[ggplot]

```{r echo=TRUE, message=FALSE, warning=FALSE}
dfAlc %>%
  ggplot(aes(urbanrt, employrt, label=abbrv, color=region)) + geom_label()
```

2.[ggplot]

```{r echo=TRUE, message=FALSE, warning=FALSE}
dfAlc %>%
  ggplot(aes(urbanrt, employrt, label=abbrv, color=region)) + geom_label()
```

2.[scatterPlot]

```{r}
plot(dfAlc$suicideper100,dfAlc$aconsum, xlab = "suicides/100 people", ylab="alcohol consumption")
plot(dfAlc$employrt,dfAlc$aconsum, xlab = "employee rate", ylab="alcohol consumption")
plot(dfAlc$urbanrt,dfAlc$aconsum, xlab = "urban rate", ylab="alcohol consumption")
```

2.[scatterPlot] in logs

```{r}
log10IncomePer1 <- log10(dfAlc$incomeper1)
log10Aconsum <- log10(dfAlc$aconsum)
plot(log10IncomePer1,log10Aconsum)
```

2.[histogram]

```{r}
hist(dfAlc$aconsum,xlab = "alcohol consumption") 
dfAlc$country[which.max(dfAlc$aconsum)]
```

2.[boxplot]

```{r}
boxplot(aconsum~region, data = dfAlc,na.action = NULL) 
boxplot(suicidesPer100~region, data = dfAlc)
boxplot(employrt~region, data = dfAlc)
boxplot(urbanrt~region, data = dfAlc)
```


## II.



## III.

## References

